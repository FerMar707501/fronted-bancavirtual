<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reportes - Banco Virtual</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <!-- Estilos compartidos -->
    <link rel="stylesheet" href="../../shared/css/admin.css">
    
    <style>
        .report-card {
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .report-card:hover {
            border-color: #db8e5e;
            box-shadow: 0 4px 8px rgba(219, 142, 94, 0.2);
            transform: translateY(-2px);
        }
        
        .report-card.active {
            border-color: #db8e5e;
            background-color: #fff8f5;
        }
        
        .report-card i {
            font-size: 2.5rem;
            color: #db8e5e;
        }
        
        .report-content {
            display: none;
        }
        
        .report-content.active {
            display: block;
        }
        
        .stats-card {
            background: linear-gradient(135deg, #db8e5e 0%, #c67a4e 100%);
            color: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
        }
        
        .stats-card h3 {
            font-size: 2rem;
            font-weight: bold;
            margin: 0;
        }
        
        .stats-card p {
            margin: 0;
            opacity: 0.9;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }
        
        .filter-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .btn-generate {
            background-color: #db8e5e;
            border-color: #db8e5e;
            color: white;
        }
        
        .btn-generate:hover {
            background-color: #c67a4e;
            border-color: #c67a4e;
            color: white;
        }
        
        .btn-export {
            background-color: #28a745;
            border-color: #28a745;
            color: white;
        }
        
        .btn-export:hover {
            background-color: #218838;
            border-color: #218838;
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="../dashboard.html">
                <i class="bi bi-bank2"></i> Banco Virtual
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../dashboard.html">
                            <i class="bi bi-speedometer2"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <span class="nav-link" id="userInfo">
                            <i class="bi bi-person-circle"></i> <span id="userName"></span>
                        </span>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="logout()">
                            <i class="bi bi-box-arrow-right"></i> Salir
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Contenido principal -->
    <div class="container-fluid mt-4">
        <div class="row">
            <!-- Sidebar con tipos de reportes -->
            <div class="col-md-3">
                <h4 class="mb-3">Tipos de Reportes</h4>
                
                <div class="report-card" data-report="transacciones">
                    <div class="text-center">
                        <i class="bi bi-currency-exchange"></i>
                        <h5 class="mt-2">Transacciones</h5>
                        <p class="text-muted small">Historial de operaciones</p>
                    </div>
                </div>
                
                <div class="report-card" data-report="clientes">
                    <div class="text-center">
                        <i class="bi bi-people"></i>
                        <h5 class="mt-2">Clientes</h5>
                        <p class="text-muted small">Información de clientes</p>
                    </div>
                </div>
                
                <div class="report-card" data-report="prestamos">
                    <div class="text-center">
                        <i class="bi bi-cash-stack"></i>
                        <h5 class="mt-2">Préstamos</h5>
                        <p class="text-muted small">Estado de préstamos</p>
                    </div>
                </div>
                
                <div class="report-card" data-report="morosidad">
                    <div class="text-center">
                        <i class="bi bi-exclamation-triangle"></i>
                        <h5 class="mt-2">Morosidad</h5>
                        <p class="text-muted small">Análisis de mora</p>
                    </div>
                </div>
                
                <div class="report-card" data-report="estado-cuenta">
                    <div class="text-center">
                        <i class="bi bi-file-earmark-text"></i>
                        <h5 class="mt-2">Estado de Cuenta</h5>
                        <p class="text-muted small">Detalle por cuenta</p>
                    </div>
                </div>
            </div>
            
            <!-- Área de contenido de reportes -->
            <div class="col-md-9">
                <!-- Reporte de Transacciones -->
                <div id="reporte-transacciones" class="report-content">
                    <h3 class="mb-4">
                        <i class="bi bi-currency-exchange"></i> Reporte de Transacciones
                    </h3>
                    
                    <!-- Filtros -->
                    <div class="filter-section">
                        <div class="row g-3">
                            <div class="col-md-3">
                                <label class="form-label">Fecha Inicio</label>
                                <input type="date" class="form-control" id="trans-fecha-inicio" required>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Fecha Fin</label>
                                <input type="date" class="form-control" id="trans-fecha-fin" required>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Tipo de Transacción</label>
                                <select class="form-select" id="trans-tipo">
                                    <option value="">Todos</option>
                                    <option value="1">Depósito</option>
                                    <option value="2">Retiro</option>
                                    <option value="3">Transferencia</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">&nbsp;</label>
                                <button class="btn btn-generate w-100" onclick="generarReporteTransacciones()">
                                    <i class="bi bi-file-earmark-bar-graph"></i> Generar
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Resumen -->
                    <div id="trans-resumen" style="display: none;">
                        <h5 class="mb-3">Resumen</h5>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="stats-card">
                                    <h3 id="trans-total-count">0</h3>
                                    <p>Total Transacciones</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stats-card">
                                    <h3 id="trans-total-monto">Q 0.00</h3>
                                    <p>Monto Total</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stats-card">
                                    <h3 id="trans-promedio">Q 0.00</h3>
                                    <p>Promedio por Transacción</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Por tipo -->
                        <div class="card mt-3">
                            <div class="card-header bg-light">
                                <h6 class="mb-0">Distribución por Tipo</h6>
                            </div>
                            <div class="card-body" id="trans-por-tipo"></div>
                        </div>
                        
                        <!-- Tabla de transacciones -->
                        <div class="card mt-3">
                            <div class="card-header bg-light d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">Detalle de Transacciones</h6>
                                <button class="btn btn-sm btn-export" onclick="exportarTransacciones()">
                                    <i class="bi bi-download"></i> Exportar
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Fecha</th>
                                                <th>Tipo</th>
                                                <th>Origen</th>
                                                <th>Destino</th>
                                                <th>Descripción</th>
                                                <th class="text-end">Monto</th>
                                            </tr>
                                        </thead>
                                        <tbody id="trans-tabla"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Reporte de Clientes -->
                <div id="reporte-clientes" class="report-content">
                    <h3 class="mb-4">
                        <i class="bi bi-people"></i> Reporte de Clientes
                    </h3>
                    
                    <!-- Filtros -->
                    <div class="filter-section">
                        <div class="row g-3">
                            <div class="col-md-3">
                                <label class="form-label">Estado Cliente</label>
                                <select class="form-select" id="cli-estado">
                                    <option value="">Todos</option>
                                    <option value="activo">Activo</option>
                                    <option value="inactivo">Inactivo</option>
                                    <option value="suspendido">Suspendido</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Estado KYC</label>
                                <select class="form-select" id="cli-kyc">
                                    <option value="">Todos</option>
                                    <option value="pendiente">Pendiente</option>
                                    <option value="aprobado">Aprobado</option>
                                    <option value="rechazado">Rechazado</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Con Cuentas</label>
                                <select class="form-select" id="cli-cuentas">
                                    <option value="">Todos</option>
                                    <option value="true">Sí</option>
                                    <option value="false">No</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">&nbsp;</label>
                                <button class="btn btn-generate w-100" onclick="generarReporteClientes()">
                                    <i class="bi bi-file-earmark-bar-graph"></i> Generar
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Resumen -->
                    <div id="cli-resumen" style="display: none;">
                        <h5 class="mb-3">Resumen</h5>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="stats-card">
                                    <h3 id="cli-total">0</h3>
                                    <p>Total Clientes</p>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stats-card">
                                    <h3 id="cli-con-cuentas">0</h3>
                                    <p>Con Cuentas</p>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stats-card">
                                    <h3 id="cli-con-prestamos">0</h3>
                                    <p>Con Préstamos</p>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stats-card">
                                    <h3 id="cli-kyc-aprobado">0</h3>
                                    <p>KYC Aprobado</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Tabla de clientes -->
                        <div class="card mt-3">
                            <div class="card-header bg-light d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">Detalle de Clientes</h6>
                                <button class="btn btn-sm btn-export" onclick="exportarClientes()">
                                    <i class="bi bi-download"></i> Exportar
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>DPI</th>
                                                <th>Nombre</th>
                                                <th>Correo</th>
                                                <th>Estado</th>
                                                <th>KYC</th>
                                                <th class="text-center">Cuentas</th>
                                                <th class="text-center">Préstamos</th>
                                            </tr>
                                        </thead>
                                        <tbody id="cli-tabla"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Reporte de Préstamos -->
                <div id="reporte-prestamos" class="report-content">
                    <h3 class="mb-4">
                        <i class="bi bi-cash-stack"></i> Reporte de Préstamos
                    </h3>
                    
                    <!-- Filtros -->
                    <div class="filter-section">
                        <div class="row g-3">
                            <div class="col-md-3">
                                <label class="form-label">Estado</label>
                                <select class="form-select" id="prest-estado">
                                    <option value="">Todos</option>
                                    <option value="pendiente">Pendiente</option>
                                    <option value="aprobado">Aprobado</option>
                                    <option value="activo">Activo</option>
                                    <option value="pagado">Pagado</option>
                                    <option value="rechazado">Rechazado</option>
                                    <option value="en_mora">En Mora</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Fecha Inicio</label>
                                <input type="date" class="form-control" id="prest-fecha-inicio">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Fecha Fin</label>
                                <input type="date" class="form-control" id="prest-fecha-fin">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">&nbsp;</label>
                                <button class="btn btn-generate w-100" onclick="generarReportePrestamos()">
                                    <i class="bi bi-file-earmark-bar-graph"></i> Generar
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Resumen -->
                    <div id="prest-resumen" style="display: none;">
                        <h5 class="mb-3">Resumen</h5>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="stats-card">
                                    <h3 id="prest-total">0</h3>
                                    <p>Total Préstamos</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stats-card">
                                    <h3 id="prest-monto-total">Q 0.00</h3>
                                    <p>Monto Total</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stats-card">
                                    <h3 id="prest-promedio">Q 0.00</h3>
                                    <p>Promedio por Préstamo</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Por estado -->
                        <div class="card mt-3">
                            <div class="card-header bg-light">
                                <h6 class="mb-0">Distribución por Estado</h6>
                            </div>
                            <div class="card-body" id="prest-por-estado"></div>
                        </div>
                        
                        <!-- Tabla de préstamos -->
                        <div class="card mt-3">
                            <div class="card-header bg-light d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">Detalle de Préstamos</h6>
                                <button class="btn btn-sm btn-export" onclick="exportarPrestamos()">
                                    <i class="bi bi-download"></i> Exportar
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>No. Préstamo</th>
                                                <th>Cliente</th>
                                                <th>Tipo</th>
                                                <th class="text-end">Monto</th>
                                                <th>Plazo</th>
                                                <th>Estado</th>
                                                <th>Fecha</th>
                                            </tr>
                                        </thead>
                                        <tbody id="prest-tabla"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Reporte de Morosidad -->
                <div id="reporte-morosidad" class="report-content">
                    <h3 class="mb-4">
                        <i class="bi bi-exclamation-triangle"></i> Reporte de Morosidad
                    </h3>
                    
                    <!-- Botón generar -->
                    <div class="filter-section">
                        <button class="btn btn-generate" onclick="generarReporteMorosidad()">
                            <i class="bi bi-file-earmark-bar-graph"></i> Generar Reporte
                        </button>
                    </div>
                    
                    <!-- Resumen -->
                    <div id="mora-resumen" style="display: none;">
                        <h5 class="mb-3">Resumen</h5>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="stats-card bg-danger">
                                    <h3 id="mora-total">0</h3>
                                    <p>Préstamos en Mora</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stats-card bg-danger">
                                    <h3 id="mora-monto">Q 0.00</h3>
                                    <p>Monto en Mora</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stats-card bg-danger">
                                    <h3 id="mora-promedio">0</h3>
                                    <p>Días Promedio Mora</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Por rango de días -->
                        <div class="card mt-3">
                            <div class="card-header bg-light">
                                <h6 class="mb-0">Distribución por Días de Mora</h6>
                            </div>
                            <div class="card-body" id="mora-por-rango"></div>
                        </div>
                        
                        <!-- Tabla de morosidad -->
                        <div class="card mt-3">
                            <div class="card-header bg-light d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">Detalle de Préstamos en Mora</h6>
                                <button class="btn btn-sm btn-export" onclick="exportarMorosidad()">
                                    <i class="bi bi-download"></i> Exportar
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>No. Préstamo</th>
                                                <th>Cliente</th>
                                                <th>DPI</th>
                                                <th class="text-end">Monto Mora</th>
                                                <th class="text-center">Cuotas Vencidas</th>
                                                <th class="text-center">Días Mora</th>
                                                <th>Estado</th>
                                            </tr>
                                        </thead>
                                        <tbody id="mora-tabla"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Reporte de Estado de Cuenta -->
                <div id="reporte-estado-cuenta" class="report-content">
                    <h3 class="mb-4">
                        <i class="bi bi-file-earmark-text"></i> Estado de Cuenta
                    </h3>
                    
                    <!-- Filtros -->
                    <div class="filter-section">
                        <div class="row g-3">
                            <div class="col-md-4">
                                <label class="form-label">Seleccionar Cuenta</label>
                                <select class="form-select" id="ec-cuenta" required>
                                    <option value="">Seleccione una cuenta...</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Fecha Inicio</label>
                                <input type="date" class="form-control" id="ec-fecha-inicio" required>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Fecha Fin</label>
                                <input type="date" class="form-control" id="ec-fecha-fin" required>
                            </div>
                            <div class="col-md-2">
                                <label class="form-label">&nbsp;</label>
                                <button class="btn btn-generate w-100" onclick="generarEstadoCuenta()">
                                    <i class="bi bi-file-earmark-bar-graph"></i> Generar
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Resultado -->
                    <div id="ec-resultado" style="display: none;">
                        <!-- Información de la cuenta -->
                        <div class="card mb-3">
                            <div class="card-header bg-light">
                                <h6 class="mb-0">Información de la Cuenta</h6>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p><strong>Número de Cuenta:</strong> <span id="ec-numero"></span></p>
                                        <p><strong>Tipo de Cuenta:</strong> <span id="ec-tipo"></span></p>
                                    </div>
                                    <div class="col-md-6">
                                        <p><strong>Cliente:</strong> <span id="ec-cliente"></span></p>
                                        <p><strong>Agencia:</strong> <span id="ec-agencia"></span></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Resumen -->
                        <div class="row mb-3">
                            <div class="col-md-3">
                                <div class="stats-card">
                                    <h3 id="ec-saldo-inicial">Q 0.00</h3>
                                    <p>Saldo Inicial</p>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stats-card bg-success">
                                    <h3 id="ec-total-creditos">Q 0.00</h3>
                                    <p>Total Créditos</p>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stats-card bg-danger">
                                    <h3 id="ec-total-debitos">Q 0.00</h3>
                                    <p>Total Débitos</p>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stats-card">
                                    <h3 id="ec-saldo-final">Q 0.00</h3>
                                    <p>Saldo Final</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Tabla de movimientos -->
                        <div class="card">
                            <div class="card-header bg-light d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">Movimientos del Período</h6>
                                <button class="btn btn-sm btn-export" onclick="exportarEstadoCuenta()">
                                    <i class="bi bi-download"></i> Exportar
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Fecha</th>
                                                <th>Descripción</th>
                                                <th>Tipo</th>
                                                <th>Referencia</th>
                                                <th class="text-end">Débito</th>
                                                <th class="text-end">Crédito</th>
                                                <th class="text-end">Saldo</th>
                                            </tr>
                                        </thead>
                                        <tbody id="ec-tabla"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Mensaje inicial -->
                <div id="mensaje-inicial" class="text-center py-5">
                    <i class="bi bi-file-earmark-bar-graph" style="font-size: 5rem; color: #db8e5e;"></i>
                    <h4 class="mt-3">Seleccione un tipo de reporte</h4>
                    <p class="text-muted">Elija una opción del menú lateral para generar un reporte</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Scripts compartidos -->
    <script src="../../shared/js/api.js"></script>
    <script src="../../shared/js/utils.js"></script>
    <script src="../../shared/js/auth.js"></script>
    
    <!-- Script del módulo -->
    <script src="controllers/reportesController.js"></script>
    
    <script>
        // Inicialización
        document.addEventListener('DOMContentLoaded', async () => {
            verificarAutenticacion();
            
            const user = obtenerUsuarioActual();
            if (user) {
                document.getElementById('userName').textContent = user.nombre_completo;
            }
            
            // Cargar cuentas para estado de cuenta
            await cargarCuentasSelect();
            
            // Establecer fechas por defecto (último mes)
            const hoy = new Date();
            const haceUnMes = new Date(hoy);
            haceUnMes.setMonth(haceUnMes.getMonth() - 1);
            
            document.querySelectorAll('[id$="-fecha-fin"]').forEach(input => {
                input.value = hoy.toISOString().split('T')[0];
            });
            
            document.querySelectorAll('[id$="-fecha-inicio"]').forEach(input => {
                input.value = haceUnMes.toISOString().split('T')[0];
            });
            
            // Manejar selección de reportes
            document.querySelectorAll('.report-card').forEach(card => {
                card.addEventListener('click', () => {
                    const reportType = card.dataset.report;
                    mostrarReporte(reportType);
                });
            });
        });
        
        function mostrarReporte(tipo) {
            // Remover clase active de todas las tarjetas
            document.querySelectorAll('.report-card').forEach(c => c.classList.remove('active'));
            
            // Agregar clase active a la tarjeta seleccionada
            document.querySelector(`[data-report="${tipo}"]`).classList.add('active');
            
            // Ocultar todos los contenidos
            document.querySelectorAll('.report-content').forEach(c => c.classList.remove('active'));
            document.getElementById('mensaje-inicial').style.display = 'none';
            
            // Mostrar el contenido seleccionado
            document.getElementById(`reporte-${tipo}`).classList.add('active');
        }
        
        async function cargarCuentasSelect() {
            try {
                const cuentas = await getCuentas();
                const select = document.getElementById('ec-cuenta');
                
                cuentas.forEach(cuenta => {
                    const option = document.createElement('option');
                    option.value = cuenta.id_cuenta;
                    option.textContent = `${cuenta.numero_cuenta} - ${cuenta.cliente.primer_nombre} ${cuenta.cliente.primer_apellido}`;
                    select.appendChild(option);
                });
            } catch (error) {
                console.error('Error al cargar cuentas:', error);
            }
        }
    </script>
</body>
</html>
